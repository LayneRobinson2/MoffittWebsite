<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>From Source Code to Binary: Step 3</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Add Prism CSS for dark theme -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>
<body>
    <header>
        <div class="container">
            <h1><i class="fas fa-code"></i> From Source Code to Binary</h1>
            <nav>
                <ul>
                    <li><a href="index.html"><i class="fas fa-pencil-alt"></i> Step 1: Writing Source Code</a></li>
                    <li><a href="compilation.html"><i class="fas fa-language"></i> Step 2: Compilation</a></li>
                    <li class="active"><a href="#"><i class="fas fa-cogs"></i> Step 3: Assembly</a></li>
                    <li><a href="binary.html"><i class="fas fa-microchip"></i> Step 4: Executable Binary</a></li>
                    <li><a href="example.html"><i class="fas fa-laptop-code"></i> Complete Example</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container">
        <section class="step-content">
            <div class="step-header">
                <div class="step-number">3</div>
                <h2>Assembly</h2>
            </div>
            
            <div class="explanation">
                <p>Assembly is the process of converting object code into machine code (assembly language), which is a low-level representation of the program that's very close to the actual binary instructions the CPU understands.</p>
                
                <div class="visual-example">
                    <div class="code-container">
                        <div class="code-header">
                            <span class="dot red"></span>
                            <span class="dot yellow"></span>
                            <span class="dot green"></span>
                            <span class="filename">helloWorld.o â†’ Assembly</span>
                        </div>
                        <pre><code class="language-x86asm">; Assembly code for "Hello, World!" (x86-64)
section .data
    hello db "Hello, World!", 10, 0  ; String with newline and null terminator

section .text
    global main
    extern printf

main:
    ; Function prologue
    push rbp
    mov rbp, rsp
    
    ; Call printf with our string
    lea rdi, [hello]  ; First argument: address of string
    xor eax, eax      ; Zero RAX (varargs function)
    call printf
    
    ; Return 0
    xor eax, eax
    
    ; Function epilogue
    pop rbp
    ret</code></pre>
                    </div>
                    
                    <div class="explanation-box">
                        <h3><i class="fas fa-microchip"></i> What is Assembly?</h3>
                        <p>Assembly language is a low-level programming language that's specific to a particular computer architecture. It represents machine code instructions in a human-readable form.</p>
                        <p>The assembly process takes the object code from compilation and converts it into these architecture-specific instructions. These instructions directly correspond to the operations that the CPU can perform.</p>
                        <p>Assembly language uses mnemonics like <code>mov</code>, <code>push</code>, and <code>call</code> to represent machine operations.</p>
                    </div>
                </div>
                
                <div class="key-points">
                    <h3><i class="fas fa-key"></i> Key Points About Assembly:</h3>
                    <ul>
                        <li><i class="fas fa-check-circle"></i> <strong>Architecture-Specific:</strong> Assembly code is different for each CPU architecture (x86, ARM, etc.)</li>
                        <li><i class="fas fa-check-circle"></i> <strong>One-to-One Mapping:</strong> Each assembly instruction typically maps to one machine code instruction</li>
                        <li><i class="fas fa-check-circle"></i> <strong>Registers:</strong> Assembly code works directly with CPU registers (like <code>eax</code>, <code>rbp</code>)</li>
                        <li><i class="fas fa-check-circle"></i> <strong>Memory Management:</strong> Explicit control over memory addresses and operations</li>
                        <li><i class="fas fa-check-circle"></i> <strong>Assembler:</strong> A program that converts assembly language to machine code</li>
                    </ul>
                </div>
                
                <div class="assembly-diagram">
                    <h3><i class="fas fa-project-diagram"></i> From High-Level to Low-Level</h3>
                    <div class="level-diagram">
                        <div class="level">
                            <div class="level-title">High-Level</div>
                            <div class="level-code">
                                <pre><code class="language-c">printf("Hello, World!");</code></pre>
                            </div>
                        </div>
                        <div class="level-arrow">
                            <i class="fas fa-arrow-down"></i>
                        </div>
                        <div class="level">
                            <div class="level-title">Assembly</div>
                            <div class="level-code">
                                <pre><code class="language-x86asm">lea rdi, [hello]
call printf</code></pre>
                            </div>
                        </div>
                        <div class="level-arrow">
                            <i class="fas fa-arrow-down"></i>
                        </div>
                        <div class="level">
                            <div class="level-title">Machine Code</div>
                            <div class="level-code">
                                <pre><code class="language-text">48 8D 3D E8 0D 00 00
E8 C3 FE FF FF</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="real-world">
                    <h3><i class="fas fa-globe"></i> Real World Analogy</h3>
                    <div class="analogy-container">
                        <div class="analogy-image">
                            <i class="fas fa-tools"></i>
                        </div>
                        <div class="analogy-text">
                            <p>If compilation is like translating a book from English to Spanish, assembly is like breaking down that Spanish text into very specific, step-by-step instructions for someone who only understands basic Spanish commands.</p>
                            <p>Imagine you're giving directions to someone who doesn't speak your language well. Instead of saying "Go to the grocery store," you'd need to say "Turn right. Walk 100 steps. Turn left. Walk 50 steps." Assembly language is similarly explicit and detailed, leaving no room for interpretation.</p>
                        </div>
                    </div>
                </div>
                
                <div class="code-example">
                    <h3><i class="fas fa-terminal"></i> Assembly in Action</h3>
                    <p>Here's how you might view the assembly code generated from a compiled program:</p>
                    <div class="terminal">
                        <div class="terminal-header">
                            <span class="dot red"></span>
                            <span class="dot yellow"></span>
                            <span class="dot green"></span>
                            <span class="terminal-title">Terminal</span>
                        </div>
                        <div class="terminal-content">
                            <pre><code class="language-bash">
# Compile C code to object file
gcc -c hello.c -o hello.o
                        
# View the assembly code generated
objdump -d hello.o
                        
hello.o:     file format elf64-x86-64
                        
Disassembly of section .text:
                        
0000000000000000 <main>:
0:   55                      push   %rbp
1:   48 89 e5                mov    %rsp,%rbp
4:   48 8d 3d 00 00 00 00    lea    0x0(%rip),%rdi
b:   b0 00                   mov    $0x0,%al
d:   e8 00 00 00 00          call   12 
<main+0x12>
12:   b8 00 00 00 00          mov    $0x0,%eax
17:   5d                      pop    %rbp
18:   c3                      ret</code></pre>
                          </div>
                        </div>
                </div>
                
                <div class="register-table">
                    <h3><i class="fas fa-microchip"></i> Common x86-64 Registers</h3>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Register</th>
                                    <th>Purpose</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>RAX, EAX</td>
                                    <td>Accumulator, used for arithmetic operations and return values</td>
                                </tr>
                                <tr>
                                    <td>RBX, EBX</td>
                                    <td>Base register, sometimes used as a pointer to data</td>
                                </tr>
                                <tr>
                                    <td>RCX, ECX</td>
                                    <td>Counter register, often used in loops</td>
                                </tr>
                                <tr>
                                    <td>RDX, EDX</td>
                                    <td>Data register, used in arithmetic operations and I/O operations</td>
                                </tr>
                                <tr>
                                    <td>RSP, ESP</td>
                                    <td>Stack Pointer, points to the top of the stack</td>
                                </tr>
                                <tr>
                                    <td>RBP, EBP</td>
                                    <td>Base Pointer, points to the base of the stack frame</td>
                                </tr>
                                <tr>
                                    <td>RSI, ESI</td>
                                    <td>Source Index, used as a pointer to source in string operations</td>
                                </tr>
                                <tr>
                                    <td>RDI, EDI</td>
                                    <td>Destination Index, used as a pointer to destination in string operations</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <div class="navigation-buttons">
                <a href="assembly.html" class="button"><i class="fas fa-arrow-left"></i> Previous: Compilation</a>
                <a href="binary.html" class="button next"><i class="fas fa-arrow-right"></i> Next: Executable Binary</a>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2023 Code Journey | A visual guide to how computers understand code</p>
        </div>
    </footer>

    <!-- Add Prism JS for syntax highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    
    <script src="script.js"></script>
</body>
</html>